<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-05-02">

<title>Quartotest - Compiling KasmVNC on NixOS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Quartotest</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Compiling KasmVNC on NixOS</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">linux</div>
                <div class="quarto-category">devops</div>
                <div class="quarto-category">nix</div>
                <div class="quarto-category">kasm</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 2, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>This is a living document, for the time being. Rather than a complete blogpost, this is a tracker of my progress, as well as a quick reference I can come back to.</p>
<section id="what-is-this" class="level1">
<h1>What is this?</h1>
<p>Kasmweb is a software to create remote desktops, that exist within docker containers, and allow users to access them, all from a browser based GUI.</p>
<p>Kasmvnc is the VNC server part of kasm web, a custom fork of previous existing features, enhanced with more performance, and most importantly, a web native setup. Incompatible with existing VNC protocols, the only way to access Kasmvnc is through the http/https serive it offers, the web based VNC ui.</p>
<p>KasmVNC is an amazing piece of software, but development for it is not truly, fully public. This is present in their build system. Their build system is a series of bash scripts, that call docker containers, which call more bash scripts, to finally compile the software, and package it, all in one.</p>
<p>As part of the scripts they have to compile kasm, lots of static linking happens. They do this because not all distros package the most updated, performant versions of the libraries that kasmvnc uses.</p>
<p>But Nixos, the distro I want to package KasmVNC for, does. In addition to that, it is completely incompatible with the hacked together build system that kasm uses. In order to package KasmVNC for Nixos, I must reverse engineer their build system, and bit by bit, port it to NixOS.</p>
</section>
<section id="nixos-build-system" class="level1">
<h1>Nixos Build System</h1>
<p>How the nixos build system works. I will do later, but here I will document, step by step, how nixos builds a package.</p>
</section>
<section id="kasmvncs-build-system" class="level1">
<h1>KasmVNC’s Build System</h1>
<p>Reverse engineering KasmVNC’s build system.</p>
<p>The below is what I neeed for the compiliation commands to work. I don’t know where Kasm runs these commands, or similar equivalents, this is just what I’ve figured out.</p>
<p>Perhaps I need to only run <code>make</code> in the KasmVNC/unix directory?</p>
<pre class="{bash}"><code>
git clone https://github.com/TigerVNC/tigervnc

cd tigervnc

git clone https://github.com/kasmtech/KasmVNC

cd KasmVNC

cp ..vncserver .vncserver # this sets up build environment. I will still need to check if every single one of these things are necessary, but this works for now</code></pre>
<p>The build script can be found <a href="https://github.com/kasmtech/KasmVNC/blob/4d3a9b749adfcf89bde0b970c1c37481c92d585b/builder/build.sh#L63">here</a></p>
<p>But from this build script, I don’t think all of it is necessary. Below, I will extract what commands are actually needed, from all the fluff, cruft, and hacks.</p>
<pre class="{bash}"><code>
cmake -D CMAKE_BUILD_TYPE=RelWithDebInfo . -DBUILD_VIEWER:BOOL=OFF \
  -DENABLE_GNUTLS:BOOL=OFF

make</code></pre>
<p>Builds end up in <code>KasmVNC/unix/</code></p>
<p>Except the preliminary builds don’t work. They error:</p>
<pre class="{bash}"><code>
~/vscode/tigervnc/KasmVNC/unix master ?1 ❯ ./vncserver 

Can't locate List/MoreUtils.pm in @INC (you may need to install the List::MoreUtils module) (@INC contains: /usr/lib/perl5/5.36/site_perl /usr/share/perl5/site_perl /usr/lib/perl5/5.36/vendor_perl /usr/share/perl5/vendor_perl /usr/lib/perl5/5.36/core_perl /usr/share/perl5/core_perl) at ./vncserver line 38.
BEGIN failed--compilation aborted at ./vncserver line 38.
</code></pre>
<p>The above is probably because a perl library is missing. After attempting to install the missing library using <code>pacman -S perl-list-moreutils</code> I get a different error.</p>
<pre class="{bash}"><code>
~/vscode/tigervnc/KasmVNC/unix master ?1 ❯ ./vncserver 

Can't locate KasmVNC/CliOption.pm in @INC (you may need to install the KasmVNC::CliOption module) (@INC contains: /usr/lib/perl5/5.36/site_perl /usr/share/perl5/site_perl /usr/lib/perl5/5.36/vendor_perl /usr/share/perl5/vendor_perl /usr/lib/perl5/5.36/core_perl /usr/share/perl5/core_perl) at ./vncserver line 42.
BEGIN failed--compilation aborted at ./vncserver line 42.
</code></pre>
<p>Obviously, this won’t work. I must figure out why KasmVNC pacakges perl packages, where it puts them by default, and how to package them for Nix.</p>
<p>Alright, the vncserver command appears to be in the git repo, and rather than being a binary, it is a wrapper script to start an xvnc server. from the script:</p>
<pre><code>use KasmVNC::CliOption;
use KasmVNC::ConfigKey;
use KasmVNC::PatternValidator;
use KasmVNC::EnumValidator;
use KasmVNC::Config;
use KasmVNC::Users;
use KasmVNC::TextOption;
use KasmVNC::TextUI;
use KasmVNC::Utils;
use KasmVNC::Logger;
</code></pre>
<p>These perl modules/libraries can be found in <code>KasmVNC/unix/KasmVNC</code></p>
<p>So that is what is necessary for the vncserver script to run. But is this script really necessary? Based on the names of the perl libraries, this script might not be adding any core functionalities to kasmvnc, only things like additional command line options, or loggers.</p>
<p>I need to find where this script runs kasmvnc, and also where the actual kasmvnc binary is.</p>
<p>I think their fork of xvnc is located in <code>KasmVNC/unix/xserver/hw/vnc/xvnc.c</code>.</p>
<p>But I get compilation errors:</p>
<pre><code>
[nix-shell:~/vscode/tigervnc/KasmVNC]$ make 
[  3%] Built target os
[ 13%] Built target rdr
[ 30%] Built target network
[ 31%] Built target Xregion
[ 78%] Built target rfb
[ 80%] Built target tx
[ 81%] Built target unixcommon
[ 81%] Linking CXX executable vncconfig
/nix/store/178vvank67pg2ckr5ic5gmdkm3ri72f3-binutils-2.39/bin/ld: cannot find -lturbojpeg: No such file or directory
collect2: error: ld returned 1 exit status
make[2]: *** [unix/vncconfig/CMakeFiles/vncconfig.dir/build.make:157: unix/vncconfig/vncconfig] Error 1
make[1]: *** [CMakeFiles/Makefile2:610: unix/vncconfig/CMakeFiles/vncconfig.dir/all] Error 2
make: *** [Makefile:136: all] Error 2
</code></pre>
<p>I don’t know why this happens. For those who don’t know, make pretty much calls a set of scripts, called Makefiles. I will need to find where in these scripts, the error commands are run.</p>
<p>Weirdly, I can’t reproduce outside of the build script:</p>
<pre class="{bash}"><code>
~/vscode/tigervnc/KasmVNC master ?1 ❯ ld -lsdsakdfj
ld: cannot find -lsdsakdfj: No such file or directory
~/vscode/tigervnc/KasmVNC master ?1 ❯ ld -lturbojpeg
ld: warning: cannot find entry symbol _start; not setting start address
~/vscode/tigervnc/KasmVNC master ?2 ❯ ld -ljpeg     
ld: warning: cannot find entry symbol _start; not setting start address
~/vscode/tigervnc/KasmVNC master ?2 ❯ ld -ljpeg-turbo
ld: cannot find -ljpeg-turbo: No such file or directory
~/vscode/tigervnc/KasmVNC master ?1 ❯ 
</code></pre>
<p>I suspect the make scripts have some hacks that change working directory, or otherwise hide my installation of libjpeg.</p>
<p>When commenting out the part of the <code>KasmVNC/Cmakelists.txt</code> file that appears to be related to libjpeg, the error when I run <code>make</code> changes.</p>
<pre class="{bash}"><code>[ 95%] Building CXX object unix/vncconfig/CMakeFiles/vncconfig.dir/vncconfig.cxx.o
/home/moonpie/vscode/tigervnc/KasmVNC/vncviewer/Surface.cxx:23:10: fatal error: FL/Fl_RGB_Image.H: No such file or directory
   23 | #include &lt;FL/Fl_RGB_Image.H&gt;
      |          ^~~~~~~~~~~~~~~~~~~
compilation terminated.
make[2]: *** [tests/CMakeFiles/fbperf.dir/build.make:104: tests/CMakeFiles/fbperf.dir/__/vncviewer/Surface.cxx.o] Error 1
make[2]: *** Waiting for unfinished jobs....
/home/moonpie/vscode/tigervnc/KasmVNC/vncviewer/Surface_X11.cxx:26:10: fatal error: FL/Fl_RGB_Image.H: No such file or directory
   26 | #include &lt;FL/Fl_RGB_Image.H&gt;
      |          ^~~~~~~~~~~~~~~~~~~
compilation terminated.
make[2]: *** [tests/CMakeFiles/fbperf.dir/build.make:118: tests/CMakeFiles/fbperf.dir/__/vncviewer/Surface_X11.cxx.o] Error 1
/home/moonpie/vscode/tigervnc/KasmVNC/vncviewer/PlatformPixelBuffer.cxx:31:10: fatal error: FL/Fl.H: No such file or directory
   31 | #include &lt;FL/Fl.H&gt;
      |          ^~~~~~~~~</code></pre>
<p>This is probably missing libraries.</p>
<p>After installing fltk (<code>pacman -S fltk</code>), this error goes away, and I get a new, even harder to comprehend error.</p>
<pre class="{bash}"><code>
[ 97%] Building CXX object tests/CMakeFiles/decperf.dir/decperf.cxx.o
/home/moonpie/vscode/tigervnc/KasmVNC/vncviewer/PlatformPixelBuffer.cxx: In constructor ‘PlatformPixelBuffer::PlatformPixelBuffer(int, int)’:
/home/moonpie/vscode/tigervnc/KasmVNC/vncviewer/PlatformPixelBuffer.cxx:64:29: error: ‘uint8_t’ was not declared in this scope
   64 |   setBuffer(width, height, (uint8_t*)xim-&gt;data,
      |                             ^~~~~~~
/home/moonpie/vscode/tigervnc/KasmVNC/vncviewer/PlatformPixelBuffer.cxx:38:1: note: ‘uint8_t’ is defined in header ‘&lt;cstdint&gt;’; did you forget to ‘#include &lt;cstdint&gt;’?
   37 | #include "PlatformPixelBuffer.h"
  +++ |+#include &lt;cstdint&gt;
   38 | 
/home/moonpie/vscode/tigervnc/KasmVNC/vncviewer/PlatformPixelBuffer.cxx:64:37: error: expected primary-expression before ‘)’ token
   64 |   setBuffer(width, height, (uint8_t*)xim-&gt;data,
      |                                     ^
</code></pre>
<p>I suspect I have the wrong version of the tigervnc source code/libraries. I will need to investigate where Kasm’s build system downloads these vncviewer libraries from.</p>
<p>After editing the errored file, to include the library:</p>
<p>Within <code>KasmVNC/vncviewer/PlatformPixelBuffer.cxx</code>:</p>
<pre class="{c++}"><code>
#include &lt;cstdint&gt;
</code></pre>
<p>I get a different error.</p>
<pre class="{shell}"><code>
[ 94%] Building CXX object tests/CMakeFiles/fbperf.dir/__/vncviewer/PlatformPixelBuffer.cxx.o
/home/moonpie/vscode/tigervnc/KasmVNC/vncviewer/PlatformPixelBuffer.cxx: In constructor ‘PlatformPixelBuffer::PlatformPixelBuffer(int, int)’:
/home/moonpie/vscode/tigervnc/KasmVNC/vncviewer/PlatformPixelBuffer.cxx:66:3: error: ‘setBuffer’ was not declared in this scope; did you mean ‘setbuffer’?
   66 |   setBuffer(width, height, (uint8_t*)xim-&gt;data,
      |   ^~~~~~~~~
      |   setbuffer</code></pre>
<p>To be honest, I think I am going in the wrong direction. I think it’s likely that I have the wrong version of tigervnc or something. I will try to see how Kasm’s build scripts set this up.</p>
<p>Okay, I will attempt to create a visual graph, documenting each step of KasmVNC’s build system, to build an ubuntu package. I will have hyperlinks to each of the scripts/dockerfiles, or other pieces of the github repo. Currently still working on figuring out how to use Graphviz.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
<svg width="672" height="480" viewbox="0.00 0.00 856.99 363.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 359)"> <polygon fill="white" stroke="transparent" points="-4,4 -4,-359 852.99,-359 852.99,4 -4,4"></polygon> <!-- Entry --> <g id="node1" class="node">
<title>
Entry
</title>
<g id="a_node1"><a href="https://github.com/kasmtech/KasmVNC/tree/master/builder" title="Entry.\n Starts out at KasmVNC/builder"> <polygon fill="none" stroke="black" points="280.99,-354.8 85.69,-354.8 85.69,-313.6 280.99,-313.6 280.99,-354.8"></polygon> <text text-anchor="middle" x="183.34" y="-338.4" font-family="Times,serif" font-size="14.00">Entry.</text> <text text-anchor="middle" x="183.34" y="-321.6" font-family="Times,serif" font-size="14.00"> Starts out at KasmVNC/builder</text> </a> </g> </g> <!-- BuildPackage --> <g id="node2" class="node">
<title>
BuildPackage
</title>
<g id="a_node2"><a href="https://github.com/kasmtech/KasmVNC/blob/master/builder/build-package" title="I will run the 'builder/build-package ubuntu bionic' command. \n This isn't the only command available, but for an example."> <polygon fill="none" stroke="black" points="366.53,-260.4 0.16,-260.4 0.16,-219.2 366.53,-219.2 366.53,-260.4"></polygon> <text text-anchor="middle" x="183.34" y="-244" font-family="Times,serif" font-size="14.00">I will run the ‘builder/build-package ubuntu bionic’ command. </text> <text text-anchor="middle" x="183.34" y="-227.2" font-family="Times,serif" font-size="14.00"> This isn’t the only command available, but for an example.</text> </a> </g> </g> <!-- Entry&#45;&gt;BuildPackage --> <g id="edge1" class="edge">
<title>
Entry-&gt;BuildPackage
</title>
<g id="a_edge1"><a href="https://example.com" title="test label"> <path fill="none" stroke="black" d="M183.34,-313.15C183.34,-300.72 183.34,-284.51 183.34,-270.59"></path> <polygon fill="black" stroke="black" points="186.84,-270.49 183.34,-260.49 179.84,-270.49 186.84,-270.49"></polygon> </a> </g> <g id="a_edge1-label"><a href="https://example.com" title="test label"> <text text-anchor="middle" x="208.42" y="-282.8" font-family="Times,serif" font-size="14.00">test label</text> </a> </g> </g> <!-- BuildTarball --> <g id="node3" class="node">
<title>
BuildTarball
</title>
<g id="a_node3"><a href="https://github.com/kasmtech/KasmVNC/blob/master/builder/build-tarball" title="build-tarball ubuntu bionic"> <polygon fill="none" stroke="black" points="266.42,-182 100.26,-182 100.26,-146 266.42,-146 266.42,-182"></polygon> <text text-anchor="middle" x="183.34" y="-159.8" font-family="Times,serif" font-size="14.00">build-tarball ubuntu bionic</text> </a> </g> </g> <!-- BuildPackage&#45;&gt;BuildTarball --> <g id="edge2" class="edge">
<title>
BuildPackage-&gt;BuildTarball
</title>
<path fill="none" stroke="black" d="M183.34,-219.02C183.34,-210.89 183.34,-201.33 183.34,-192.53"></path> <polygon fill="black" stroke="black" points="186.84,-192.32 183.34,-182.32 179.84,-192.32 186.84,-192.32"></polygon> </g> <!-- www --> <g id="node4" class="node">
<title>
www
</title>
<g id="a_node4"><a href="https://github.com/kasmtech/KasmVNC/blob/master/builder/dockerfile.www.build" title="if some condition, then \n build and run dockerfile.www.build"> <polygon fill="none" stroke="black" points="605.35,-260.4 385.33,-260.4 385.33,-219.2 605.35,-219.2 605.35,-260.4"></polygon> <text text-anchor="middle" x="495.34" y="-244" font-family="Times,serif" font-size="14.00">if some condition, then </text> <text text-anchor="middle" x="495.34" y="-227.2" font-family="Times,serif" font-size="14.00"> build and run dockerfile.www.build</text> </a> </g> </g> <!-- build&#45;tarball --> <g id="node5" class="node">
<title>
build-tarball
</title>
<polygon fill="none" stroke="black" points="538.04,-352.2 452.64,-352.2 452.64,-316.2 538.04,-316.2 538.04,-352.2"></polygon> <text text-anchor="middle" x="495.34" y="-330" font-family="Times,serif" font-size="14.00">build-tarball</text> </g> <!-- build&#45;tarball&#45;&gt;www --> <g id="edge3" class="edge">
<title>
build-tarball-&gt;www
</title>
<path fill="none" stroke="black" d="M495.34,-315.82C495.34,-303.2 495.34,-285.8 495.34,-270.94"></path> <polygon fill="black" stroke="black" points="498.84,-270.67 495.34,-260.67 491.84,-270.67 498.84,-270.67"></polygon> </g> <!-- buildwwwsh --> <g id="node6" class="node">
<title>
buildwwwsh
</title>
<g id="a_node6"><a href="https://github.com/kasmtech/KasmVNC/blob/master/builder/build_www.sh" title="ENTRYPOINT [ &quot;/src/build_www.sh&quot; ]"> <polygon fill="none" stroke="black" points="849.14,-36 607.54,-36 607.54,0 849.14,0 849.14,-36"></polygon> <text text-anchor="middle" x="728.34" y="-13.8" font-family="Times,serif" font-size="14.00">ENTRYPOINT [ “/src/build_www.sh” ]</text> </a> </g> </g> <!-- COPY kasmweb/ /src/www/ --> <g id="node7" class="node">
<title>
COPY kasmweb/ /src/www/
</title>
<polygon fill="none" stroke="black" points="816.28,-352.2 640.41,-352.2 640.41,-316.2 816.28,-316.2 816.28,-352.2"></polygon> <text text-anchor="middle" x="728.34" y="-330" font-family="Times,serif" font-size="14.00">COPY kasmweb/ /src/www/</text> </g> <!-- COPY builder/build_www.sh /src/ --> <g id="node8" class="node">
<title>
COPY builder/build_www.sh /src/
</title>
<polygon fill="none" stroke="black" points="833.39,-257.8 623.29,-257.8 623.29,-221.8 833.39,-221.8 833.39,-257.8"></polygon> <text text-anchor="middle" x="728.34" y="-235.6" font-family="Times,serif" font-size="14.00">COPY builder/build_www.sh /src/</text> </g> <!-- COPY kasmweb/ /src/www/&#45;&gt;COPY builder/build_www.sh /src/ --> <g id="edge4" class="edge">
<title>
COPY kasmweb/ /src/www/-&gt;COPY builder/build_www.sh /src/
</title>
<path fill="none" stroke="black" d="M728.34,-315.82C728.34,-302.4 728.34,-283.57 728.34,-268.14"></path> <polygon fill="black" stroke="black" points="731.84,-268.1 728.34,-258.1 724.84,-268.1 731.84,-268.1"></polygon> </g> <!-- WORKDIR /src/www --> <g id="node9" class="node">
<title>
WORKDIR /src/www
</title>
<polygon fill="none" stroke="black" points="798.66,-182 658.02,-182 658.02,-146 798.66,-146 798.66,-182"></polygon> <text text-anchor="middle" x="728.34" y="-159.8" font-family="Times,serif" font-size="14.00">WORKDIR /src/www</text> </g> <!-- COPY builder/build_www.sh /src/&#45;&gt;WORKDIR /src/www --> <g id="edge5" class="edge">
<title>
COPY builder/build_www.sh /src/-&gt;WORKDIR /src/www
</title>
<path fill="none" stroke="black" d="M728.34,-221.68C728.34,-212.93 728.34,-202.06 728.34,-192.19"></path> <polygon fill="black" stroke="black" points="731.84,-192.02 728.34,-182.02 724.84,-192.02 731.84,-192.02"></polygon> </g> <!-- RUN npm install --> <g id="node10" class="node">
<title>
RUN npm install
</title>
<polygon fill="none" stroke="black" points="784.01,-109 672.67,-109 672.67,-73 784.01,-73 784.01,-109"></polygon> <text text-anchor="middle" x="728.34" y="-86.8" font-family="Times,serif" font-size="14.00">RUN npm install</text> </g> <!-- WORKDIR /src/www&#45;&gt;RUN npm install --> <g id="edge6" class="edge">
<title>
WORKDIR /src/www-&gt;RUN npm install
</title>
<path fill="none" stroke="black" d="M728.34,-145.81C728.34,-137.79 728.34,-128.05 728.34,-119.07"></path> <polygon fill="black" stroke="black" points="731.84,-119.03 728.34,-109.03 724.84,-119.03 731.84,-119.03"></polygon> </g> <!-- RUN npm install&#45;&gt;buildwwwsh --> <g id="edge7" class="edge">
<title>
RUN npm install-&gt;buildwwwsh
</title>
<path fill="none" stroke="black" d="M728.34,-72.81C728.34,-64.79 728.34,-55.05 728.34,-46.07"></path> <polygon fill="black" stroke="black" points="731.84,-46.03 728.34,-36.03 724.84,-46.03 731.84,-46.03"></polygon> </g> </g>
</svg>
</p>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>